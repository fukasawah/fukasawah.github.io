<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href=https://fukasawah.github.io/css/theme.min.c2192e42f5d8aa9c5c065b0031ed7adc9d457a6b5fa3af342c2e576cdee33bce3ae51be85f1c2356f2270efcea7d867a97195c67f6061e7036c402f41d576f97.css integrity="sha512-whkuQvXYqpxcBlsAMe163J1Femtfo680LC5XbN7jO8465RvoXxwjVvInDvzqfYZ6lxlcZ/YGHnA2xAL0HVdvlw=="><link rel=stylesheet href=https://fukasawah.github.io/css/syntax.min.9d0044b0ce135aff3405271be2a17805c5ae03ec48f146191dc4b30923424c76fe7c6086323aa2cbf83affd41e11fef907f33b6cd685fe3645043bb79f63509a.css integrity="sha512-nQBEsM4TWv80BScb4qF4BcWuA+xI8UYZHcSzCSNCTHb+fGCGMjqiy/g6/9QeEf75B/M7bNaF/jZFBDu3n2NQmg==" media=print onload='this.media="all"'><noscript><link rel=stylesheet type=text/css href=https://fukasawah.github.io/css/syntax.min.9d0044b0ce135aff3405271be2a17805c5ae03ec48f146191dc4b30923424c76fe7c6086323aa2cbf83affd41e11fef907f33b6cd685fe3645043bb79f63509a.css integrity="sha512-nQBEsM4TWv80BScb4qF4BcWuA+xI8UYZHcSzCSNCTHb+fGCGMjqiy/g6/9QeEf75B/M7bNaF/jZFBDu3n2NQmg=="></noscript><title>iOS SafariをWindows上からデバッグする | fukasawah.github.io</title></head><body><header><p><a href=https://fukasawah.github.io/>fukasawah.github.io</a></p></header><main><article><header><h1>iOS SafariをWindows上からデバッグする</h1></header><aside class=toc><nav id=TableOfContents><ul><li><a href=#参考>参考</a></li><li><a href=#前提>前提</a></li><li><a href=#導入>導入</a><ul><li><a href=#ios-webkit-debug-proxyの導入>iOS WebKit Debug Proxyの導入</a></li><li><a href=#remotedebug-ios-webkit-adapterを導入する>RemoteDebug iOS WebKit Adapterを導入する</a></li><li><a href=#デバッグ開始>デバッグ開始</a></li></ul></li><li><a href=#デバッグ>デバッグ</a><ul><li><a href=#事象>事象</a></li><li><a href=#デバッガで見てみる>デバッガで見てみる</a></li><li><a href=#解決へ>解決へ</a></li></ul></li></ul></nav></aside><h2 id=参考>参考</h2><ul><li><a href=https://zatta.link/web/debug-ios-safari-with-windows.html>https://zatta.link/web/debug-ios-safari-with-windows.html</a></li></ul><h2 id=前提>前提</h2><ul><li>Windows 10</li><li>Chrome</li><li>Nodejs(RemoteDebug iOS WebKit Adapterを導入するため必要)</li><li>iTunes(iPhoneの通信の都合上必要らしい)</li></ul><h2 id=導入>導入</h2><h3 id=ios-webkit-debug-proxyの導入>iOS WebKit Debug Proxyの導入</h3><p><a href=https://github.com/google/ios-webkit-debug-proxy>https://github.com/google/ios-webkit-debug-proxy</a></p><p>バイナリ自体は<a href=https://scoop.sh/>scoop</a>というWindows向けのパッケージマネージャソフト経由で入れる。</p><p>ドキュメントに従い入れる。</p><p>起動したらiPhoneをUSBケーブルでつなぎ、Safariで開く。Safariの設定でWebインスペクタが無効担っていると以下のようなメッセージがでる。</p><pre tabindex=0><code>PS C:\Users\fukas&gt; ios_webkit_debug_proxy.exe
Listing devices on :9221
ssl recv failed: No error
Unable to connect to デバイス名 (00008030-001D18580E39802E)
  Please verify that Settings &gt; Safari &gt; Advanced &gt; Web Inspector = ON
</code></pre><p>上記の通り、iPhone側のWebインスペクタが無効なので有効にしてあげる。</p><p>上手くいくと以下のようになる。ただ繋がっただけでまだデバッグはできない。</p><pre tabindex=0><code>PS C:\Users\fukas&gt; ios_webkit_debug_proxy.exe
Listing devices on :9221
Connected :9222 to デバイス名 (00008030-001D18580E39802E)
</code></pre><p>ここまで確認したら、ios_webkit_debug_proxyは一旦閉じてよい。</p><h3 id=remotedebug-ios-webkit-adapterを導入する>RemoteDebug iOS WebKit Adapterを導入する</h3><p><a href=https://github.com/RemoteDebug/remotedebug-ios-webkit-adapter>https://github.com/RemoteDebug/remotedebug-ios-webkit-adapter</a></p><p>これを入れるとChromeのdev toolsでデバッグができるようになる。要Node.js。</p><p>後は<code>remotedebug-ios-webkit-adapter</code>を実行する。こっちは9000番のポートを使い、後でchrome側でこのポートを使うよう設定する必要がある。</p><p>なお、内部で<code>ios_webkit_debug_proxy</code>を実行しているので順番に起動するとか考える必要はない。<code>remotedebug-ios-webkit-adapter</code>だけ実行すればいい。</p><h3 id=デバッグ開始>デバッグ開始</h3><p>Chromeを開き、<code>chrome://inspect/#devices</code>を入力。</p><p>DevicesのConfigureを開く。</p><p><figure><a href=images/index/2022-12-21-07-48-10.png target=_blank onclick=showOverlay(event)><picture><source type=image/webp srcset=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-48-10_hu744433c57c36aae7fe868a5cbf032e70_15691_500x500_fit_q80_h2_box_3.webp width=500 height=182><img src=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-48-10_hu744433c57c36aae7fe868a5cbf032e70_15691_500x500_fit_q80_bgffffff_box_3.jpg width=500 height=182 loading=lazy></picture></a></figure></p><p><code>localhost:9000</code>を追加する。</p><p><figure><a href=images/index/2022-12-21-07-47-52.png target=_blank onclick=showOverlay(event)><picture><source type=image/webp srcset=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-47-52_hu7f0e62a34b0f1225b17dc3530c4f6885_10266_500x500_fit_q80_h2_box_3.webp width=291 height=312><img src=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-47-52_hu7f0e62a34b0f1225b17dc3530c4f6885_10266_500x500_fit_q80_bgffffff_box_3.jpg width=291 height=312 loading=lazy></picture></a></figure></p><p>後はSafari側で操作すると、ChromeのRemote Targetにブラウジング中の一覧が出てくるので、タイトルから対象を見つけてinspectをクリックする。</p><p><figure><a href=images/index/2022-12-21-07-48-56.png target=_blank onclick=showOverlay(event)><picture><source type=image/webp srcset=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-48-56_huca5e5513ef6c08343e42218caa3dfb55_34179_500x500_fit_q80_h2_box_3.webp width=500 height=170><img src=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-48-56_huca5e5513ef6c08343e42218caa3dfb55_34179_500x500_fit_q80_bgffffff_box_3.jpg width=500 height=170 loading=lazy></picture></a></figure></p><p>少々操作感が違うが、これでいつも通りのchrome dev toolsを使ったデバッグができるだろう。</p><p>フル機能ではないが、もちろんCSSを修正すると実機も変化するし、JSを実行することも、Breakpointも効く。</p><h2 id=デバッグ>デバッグ</h2><h3 id=事象>事象</h3><p>まず事象が起きているところ。iPhoneで撮影したもの。</p><p><figure><a href=images/index/2022-12-21-07-57-45.png target=_blank onclick=showOverlay(event)><picture><source type=image/webp srcset=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-57-45_hub37975764bae7a9c4338b4cdeff29eba_385379_500x500_fit_q80_h2_box_3.webp width=375 height=500><img src=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-57-45_hub37975764bae7a9c4338b4cdeff29eba_385379_500x500_fit_q80_bgffffff_box_3.jpg width=375 height=500 loading=lazy></picture></a></figure></p><p>こんな感じでフォントサイズが不規則に大きくなることがあった。変なスタイルが当たっているに違いないと思ったので、デバッガで見てみたいというのがモチベーションだった。</p><h3 id=デバッガで見てみる>デバッガで見てみる</h3><p>デバッガでみたところ、やはりなぜかfont-sizeが19pxになっている。</p><p><figure><a href=images/index/2022-12-21-07-28-06.png target=_blank onclick=showOverlay(event)><picture><source type=image/webp srcset=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-28-06_hu6cc7d5c577fed83f2801a4e309a08864_182625_500x500_fit_q80_h2_box_3.webp width=500 height=165><img src=/posts/2022/12/21/debug-ios-safari-on-windows/images/index/2022-12-21-07-28-06_hu6cc7d5c577fed83f2801a4e309a08864_182625_500x500_fit_q80_bgffffff_box_3.jpg alt=この画像は上記と違うけど同様の事象は起きている width=500 height=165 loading=lazy></picture></a><figcaption>この画像は上記と違うけど同様の事象は起きている</figcaption></figure></p><p>しかし、CSS自体はちゃんと14pxで絶対値で指定しているので、大きくなるはずがない…デバッガではこれ以上よくわからなかった。</p><h3 id=解決へ>解決へ</h3><p>結局 <code>font-size safari 大きくなる</code> で調べたところ、<code>-webkit-text-size-adjust: 100%</code>を効かせればよいらしい。
こんなの部分的に適用してほしくないので、bodyで指定した。</p><p>今回はデバッガを使うまでもなかったけど、今後はsafariのデザインも微調整できそう。デザインセンスないけど。</p><footer><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://fukasawah.github.io/tags/safari>#Safari</a></span>
<span class=tag><a href=https://fukasawah.github.io/tags/debug>#Debug</a></span></p><p>Created at: 2022-12-21 08:12 +0900<br>Updated at: 2022-12-21 08:15 +0900 <a href=https://github.com/fukasawah/blog/commit/4246b4c1d0907788fb8cb42adeeedb8246aef4af target=_blank rel=noopener>#4246b4c</a></p><p><a href=https://fukasawah.github.io/posts/2023/01/27/google-cloud-identity/><span title="Google Cloud Identityを始める">&lt; Next</span></a>
|
<a href=https://fukasawah.github.io/posts/><span title=Posts>Posts</span></a>
|
<a href=https://fukasawah.github.io/posts/2022/12/19/exam-az-305/><span title=MCP資格のAZ-305に合格しました>Prev ></span></a></p></footer></article><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//fukasawah.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
<script src=https://fukasawah.github.io/js/theme-posts.min.526bf4c8dff80bed936c62a06f7bc8c02703fad621e3dd2ba243812d43c40b98397ff1951e5905c790b97c38633d42a0e35bf5314fdf9fcfbce31b18181b8ae3.js integrity="sha512-Umv0yN/4C+2TbGKgb3vIwCcD+tYh490rokOBLUPEC5g5f/GVHlkFx5C5fDhjPUKg41v1MU/fn8+84xsYGBuK4w==" defer></script></main><footer><p>&copy; 2023 <a href=https://fukasawah.github.io/>fukasawah</a></p></footer></body></html>