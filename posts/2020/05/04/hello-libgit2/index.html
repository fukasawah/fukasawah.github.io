<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta itemprop=name content="libgit2を使ってみる"><meta itemprop=description content="https://github.com/libgit2/libgit2 WSL2 + Ubuntu 18.04 でどんな感じに使えるか試した。 ビルド sudo apt update sudo apt install gcc cmake libssl-dev zlib1g-dev libssh2-1-dev pkg-copnfig git clone https://github.com/libgit2/libgit2.git cd libgit2 git checkout v1.0.0 mkdir build && cd build cmake .. make -j ビルドはただの趣味でお遊びなのでイン"><meta itemprop=datePublished content="2020-05-04T19:50:31+09:00"><meta itemprop=dateModified content="2020-05-04T20:08:07+09:00"><meta itemprop=wordCount content="1913"><meta itemprop=keywords content="libgit2,"><meta property="og:title" content="libgit2を使ってみる"><meta property="og:description" content="https://github.com/libgit2/libgit2 WSL2 + Ubuntu 18.04 でどんな感じに使えるか試した。 ビルド sudo apt update sudo apt install gcc cmake libssl-dev zlib1g-dev libssh2-1-dev pkg-copnfig git clone https://github.com/libgit2/libgit2.git cd libgit2 git checkout v1.0.0 mkdir build && cd build cmake .. make -j ビルドはただの趣味でお遊びなのでイン"><meta property="og:type" content="article"><meta property="og:url" content="https://fukasawah.github.io/posts/2020/05/04/hello-libgit2/"><meta property="article:published_time" content="2020-05-04T19:50:31+09:00"><meta property="article:modified_time" content="2020-05-04T20:08:07+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="libgit2を使ってみる"><meta name=twitter:description content="https://github.com/libgit2/libgit2 WSL2 + Ubuntu 18.04 でどんな感じに使えるか試した。 ビルド sudo apt update sudo apt install gcc cmake libssl-dev zlib1g-dev libssh2-1-dev pkg-copnfig git clone https://github.com/libgit2/libgit2.git cd libgit2 git checkout v1.0.0 mkdir build && cd build cmake .. make -j ビルドはただの趣味でお遊びなのでイン"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>libgit2を使ってみる</title><link rel=stylesheet href=https://fukasawah.github.io/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://fukasawah.github.io/>fukasawah.github.io</a></div><nav class="site-nav hide-in-mobile"><a href=https://fukasawah.github.io/posts/>Posts</a>
<a href=https://fukasawah.github.io/about/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/fukasawah target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/fukasawah target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://fukasawah.github.io/posts/>Posts</a></li><li><a href=https://fukasawah.github.io/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>May 4, 2020</span></div><h1>libgit2を使ってみる</h1></header><div class=content><p><a href=https://github.com/libgit2/libgit2>https://github.com/libgit2/libgit2</a></p><p>WSL2 + Ubuntu 18.04 でどんな感じに使えるか試した。</p><h3 id=ビルド>ビルド</h3><pre><code>sudo apt update
sudo apt install gcc cmake libssl-dev zlib1g-dev libssh2-1-dev pkg-copnfig

git clone https://github.com/libgit2/libgit2.git
cd libgit2
git checkout v1.0.0

mkdir build &amp;&amp; cd build
cmake ..
make -j
</code></pre><p>ビルドはただの趣味でお遊びなのでインストールはしない。</p><p>pkg-copnfigを入れないとlibssh2を見つけてくれなかった。<a href=https://github.com/libgit2/libgit2/commit/0f62e4c7393366acd8ab0887c069d9929c358d07>関連コミット</a></p><h2 id=libgit2をc言語で使う>libgit2をC言語で使う</h2><p>サンプルをコピペしたりして書いた。</p><ul><li><a href=https://github.com/libgit2/libgit2/tree/master/examples>https://github.com/libgit2/libgit2/tree/master/examples</a></li><li><a href=https://libgit2.org/libgit2/#v1.0.0>https://libgit2.org/libgit2/#v1.0.0</a></li></ul><p>サンプルの内容は、gitの良くあるコマンドをlibgi2を使って模倣するサンプルらしく、examples/lg2.cを起点にサブコマンドが実装されている（gitコマンドの細かい引数までサポートしているわけではない）。</p><ul><li><code>git_libgit2_init()</code> を最初に呼ぶ（忘れるとSegmentation Faultする）</li><li>たいていの関数は戻り値が0未満ならエラーを表現しているので必要に応じてチェックする（<code>git_*_free</code>とか<code>git_oid_tostr</code>とか例外はある）</li><li><code>git_*_free</code>は対応する型で呼ぶ必要がある。それ以外は動きは<code>free</code>と一緒で、NULLポインタは安全、2重開放するとSegmentation Faultになる</li><li><code>git_oid_tostr_s</code>の戻り値はオブジェクトIDの文字列表現で、文字列のメモリ確保してるのか？となったがスレッドローカルで持ってるとドキュメントに書いてあった。</li></ul><p>バインディング無いとしんどいですね</p><h2 id=cloneするだけ>cloneするだけ</h2><p>実行するとcloneするだけの簡単なもの。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;git2.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(){
	git_repository <span style=color:#f92672>*</span>repo;
  git_libgit2_init();

  git_clone(<span style=color:#f92672>&amp;</span>repo, <span style=color:#e6db74>&#34;https://github.com/octocat/Hello-World.git&#34;</span>, <span style=color:#e6db74>&#34;hello-world&#34;</span>, NULL);

  <span style=color:#66d9ef>if</span>(repo){
    git_repository_free(repo);
  }

  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div><p>buildディレクトリにあるlibgit2を使ってビルド＆実行</p><pre><code>gcc main.c -I ../include -L./ -lgit2
LD_LIBRARY_PATH=./ ./a.out
</code></pre><p><code>sudo apt install libgit2-dev</code> をしていれば&mldr;と思ったが、実際に試すとubuntu 18.04では<code>v0.26</code>の時点のlibgit2らしく、<code>git_error_last</code>が存在せずコンパイルできなかった。<a href=https://github.com/libgit2/libgit2/commit/f673e232afe22eb865cdc915e55a2df6493f0fbb>該当のコミット</a></p><p>なので<code>giterr_last</code>に書き換えたうえであればコンパイルできた。</p><pre><code>gcc main.c -l git2
./a.out
</code></pre><h2 id=空のコミットを重ねるだけリポジトリがあればそのまま使い無ければ作る>空のコミットを重ねるだけ（リポジトリがあればそのまま使い、無ければ作る）</h2><p>コミット後にログも出す。
変なマクロを書いたけど気にしない。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;git2.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#75715e>#define ASSERT(expr) do { \
</span><span style=color:#75715e>  int ret = (expr); \
</span><span style=color:#75715e>  if (ret != 0) { \
</span><span style=color:#75715e>    fprintf(stderr, &#34;&#39;&#34; #expr &#34;&#39; was not return of zero (ret=%d).\n&#34;, ret); \
</span><span style=color:#75715e>    const git_error *err = giterr_last(); \
</span><span style=color:#75715e>		if (err) { \
</span><span style=color:#75715e>      fprintf(stderr, &#34;ERROR %d: %s\n&#34;, err-&gt;klass, err-&gt;message); \
</span><span style=color:#75715e>    } \
</span><span style=color:#75715e>    abort(); \
</span><span style=color:#75715e>  } \
</span><span style=color:#75715e>}while(0)
</span><span style=color:#75715e></span>

<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print_commit</span>(<span style=color:#66d9ef>const</span> git_commit <span style=color:#f92672>*</span>commit){
    <span style=color:#66d9ef>char</span> buf[GIT_OID_HEXSZ <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
    <span style=color:#66d9ef>const</span> git_signature <span style=color:#f92672>*</span>parent_sig <span style=color:#f92672>=</span> git_commit_author(commit);

    <span style=color:#75715e>// buf == bufptr だが、空文字列のptrが返る場合がある
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>bufptr <span style=color:#f92672>=</span> git_oid_tostr(buf, <span style=color:#66d9ef>sizeof</span>(buf), git_commit_id(commit));
    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>message <span style=color:#f92672>=</span> git_commit_message(commit);

    <span style=color:#75715e>// 1行出力するため終端を探す
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>eos <span style=color:#f92672>=</span> message;
    <span style=color:#66d9ef>for</span>(; <span style=color:#f92672>*</span>eos <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>*</span>eos <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;\0&#39;</span>; eos<span style=color:#f92672>++</span>);
    printf(<span style=color:#e6db74>&#34;%s (%s &lt;%s&gt;): %.*s</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>,
      bufptr,
      parent_sig<span style=color:#f92672>-&gt;</span>name,
      parent_sig<span style=color:#f92672>-&gt;</span>email,
      (<span style=color:#66d9ef>int</span>)(eos <span style=color:#f92672>-</span> message),
      message
    );
}

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(){
  <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>repodir <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hello-world&#34;</span>;
	git_repository <span style=color:#f92672>*</span>repo <span style=color:#f92672>=</span> NULL;
  
  <span style=color:#75715e>// libgit2の初期化
</span><span style=color:#75715e></span>  git_libgit2_init();

  <span style=color:#75715e>// &#34;hello-world&#34; リポジトリがあるかチェック
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span>(git_repository_open_ext(<span style=color:#f92672>&amp;</span>repo, repodir, <span style=color:#ae81ff>0</span>, NULL) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>){
    <span style=color:#75715e>// 無い場合はhello-worldリポジトリをcloneして使う
</span><span style=color:#75715e></span>    <span style=color:#75715e>//ASSERT(git_clone(&amp;repo, &#34;https://github.com/octocat/Hello-World.git&#34;, repodir, NULL));
</span><span style=color:#75715e></span>
    <span style=color:#75715e>// リポジトリを作成する
</span><span style=color:#75715e></span>    ASSERT(git_repository_init(<span style=color:#f92672>&amp;</span>repo, repodir, <span style=color:#ae81ff>0</span>));
  }

  <span style=color:#75715e>// コミット時の名前とEmailの情報を得る
</span><span style=color:#75715e></span>	git_signature <span style=color:#f92672>*</span>sig <span style=color:#f92672>=</span> NULL;
  ASSERT(git_signature_default(<span style=color:#f92672>&amp;</span>sig, repo));

  <span style=color:#75715e>// インデックスを用意する
</span><span style=color:#75715e></span>	git_index <span style=color:#f92672>*</span>index <span style=color:#f92672>=</span> NULL;
  ASSERT(git_repository_index(<span style=color:#f92672>&amp;</span>index, repo));

  <span style=color:#75715e>// インデックスにあるファイルの内容をツリーに書き込み、そのツリーオブジェクトを得る
</span><span style=color:#75715e></span>  <span style=color:#75715e>// （インデックスは変化していないので、空の状態）
</span><span style=color:#75715e></span>	git_oid tree_id;
  ASSERT(git_index_write_tree(<span style=color:#f92672>&amp;</span>tree_id, index));

  <span style=color:#75715e>// インデックスを書き込む
</span><span style=color:#75715e></span>  ASSERT(git_index_write(index));

  <span style=color:#75715e>// ツリーオブジェクトからツリーを得る
</span><span style=color:#75715e></span>	git_tree <span style=color:#f92672>*</span>tree <span style=color:#f92672>=</span> NULL;
  ASSERT(git_tree_lookup(<span style=color:#f92672>&amp;</span>tree, repo, <span style=color:#f92672>&amp;</span>tree_id));

  <span style=color:#75715e>// &#34;HEAD&#34; の最新のコミットを得る
</span><span style=color:#75715e></span>  <span style=color:#75715e>// これを親のコミットに使う（もしコミットが無い状態であればparentはNULLのままになる）
</span><span style=color:#75715e></span>	git_object <span style=color:#f92672>*</span>parent <span style=color:#f92672>=</span> NULL;
	git_reference <span style=color:#f92672>*</span>ref <span style=color:#f92672>=</span> NULL;
  git_revparse_ext(<span style=color:#f92672>&amp;</span>parent, <span style=color:#f92672>&amp;</span>ref, repo, <span style=color:#e6db74>&#34;HEAD&#34;</span>);

  <span style=color:#75715e>// コミットオブジェクトを作成
</span><span style=color:#75715e></span>  git_oid commit_id;
  ASSERT(git_commit_create_v(
			<span style=color:#f92672>&amp;</span>commit_id, repo, <span style=color:#e6db74>&#34;HEAD&#34;</span>, sig, sig,
			NULL, <span style=color:#e6db74>&#34;Create empty commit</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>hello hello&#34;</span>, tree,
      <span style=color:#ae81ff>1</span>, parent));

  <span style=color:#75715e>// コミットログを全部辿る（もう少しいい感じのやり方はあるかもしれない）
</span><span style=color:#75715e></span>  git_commit <span style=color:#f92672>*</span>commit;
  ASSERT(git_commit_lookup(<span style=color:#f92672>&amp;</span>commit, repo, <span style=color:#f92672>&amp;</span>commit_id));
  <span style=color:#66d9ef>while</span>(commit){
    git_commit <span style=color:#f92672>*</span>tmp <span style=color:#f92672>=</span> NULL;
    print_commit(commit);
    git_commit_parent(<span style=color:#f92672>&amp;</span>tmp, commit, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// マージコミットを考慮していない
</span><span style=color:#75715e></span>    git_commit_free(commit);
    commit <span style=color:#f92672>=</span> tmp;
  }

  <span style=color:#75715e>// 後始末
</span><span style=color:#75715e></span>  git_tree_free(tree);
	git_index_free(index);
	git_signature_free(sig);
  git_object_free(parent);
  git_reference_free(ref);
  
  git_repository_free(repo);

  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div><h3 id=ファイルをインデックスに追加する>ファイルをインデックスに追加する</h3><p>see: <a href=https://github.com/libgit2/libgit2/blob/v1.0.0/examples/add.c#L46>https://github.com/libgit2/libgit2/blob/v1.0.0/examples/add.c#L46</a></p><p>(飽きた)</p><h2 id=おわり>おわり</h2><p>これだけで6時間ぐらいかけた。Gitの内部知識はあったが、実際にlibgit2での操作がイメージできずに非常に時間がかかってる。結局サンプルをつぎはぎしただけ。あと久々のC言語がちょっと辛かった。バインディングを使おうと思った（小並感）</p><p>でも本当にやりたいのはこういうのではなくて、gitのデータの保存先にファイルシステム以外(DBとかクラウドストレージとか)が使えるかを知りたかった。
実際、gitlabやgithubはどうやってるんだろう。さすがにファイルシステム1個を共有してるとは思えないし。</p><p>調べた感じ、libgit2はバックエンド実装の差し替えができるらしく、以下にサンプルの実装がある。</p><ul><li><a href=https://github.com/libgit2/libgit2-backends>https://github.com/libgit2/libgit2-backends</a></li></ul><p>ちなみにJava実装のJGitがあり、バックエンドにCassandraを使った物もあるようだが、分散ファイルシステムに乗り換えたらしい。</p><ul><li><a href=https://www.eclipse.org/lists/jgit-dev/msg02818.html>https://www.eclipse.org/lists/jgit-dev/msg02818.html</a><ul><li><blockquote><p>Keep in mind that Shawn Pearce reached the conclusion that a distributed key-value store is not the right solution and moved to a DFS implementation.</p></blockquote></li></ul></li><li><a href=https://github.com/spearce/jgit_cassandra>https://github.com/spearce/jgit_cassandra</a></li></ul><p>以下は調べてみたいとこのメモ</p><ul><li>AWS S3を使ったODB実装の例があるか、その際RefDBをどうするか</li><li>Azure Files（NFS）で実用性に耐えうるかどうか</li></ul></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://fukasawah.github.io/tags/libgit2>libgit2</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1913 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Created at: 2020-05-04 19:50 +0900</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Updated at: 2020-05-04 20:08 +0900</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=https://github.com/fukasawah/blog/commit/935a48b8e79a45e77e391bf06673a030aa710f80 target=_blank rel=noopener>935a48b</a> @ 2020-05-04</p></footer></article><div class="post-nav thin"><a class=next-post href=https://fukasawah.github.io/posts/2020/06/25/live-camera-on-the-raspberrypi-ffmpeg/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Raspberry Pi + ffmpegでライブカメラ</span></a>
<a class=prev-post href=https://fukasawah.github.io/posts/2020/04/14/bash-time/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Bashのtimeは複合コマンドにも使える</span></a></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"fukasawah"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2020 <a href=https://fukasawah.github.io/>fukasawah</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://fukasawah.github.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://fukasawah.github.io/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-136852520-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>